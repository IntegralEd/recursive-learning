<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Integrated Support Portal</title>
    <script>
        // Routing Logic
        document.addEventListener('DOMContentLoaded', function () {
            // Get the referrer
            const referrer = document.referrer;

            // Get URL parameters
            const params = new URLSearchParams(window.location.search);
            const clientParam = params.get('client');

            // Collect context data
            const context = {
                referrer: referrer || 'direct',
                urlParams: Object.fromEntries(params.entries()),
                userAgent: navigator.userAgent,
                timestamp: new Date().toISOString()
            };

            // Function to redirect to a client page with context
            function redirectToClient(clientPath) {
                // Encode context data into URL hash or query parameters
                const contextParam = encodeURIComponent(JSON.stringify(context));
                window.location.href = `${clientPath}?context=${contextParam}`;
            }

            if (clientParam) {
                if (clientParam.toLowerCase() === 'bhb') {
                    redirectToClient('clients/BHB/index.html');
                } else if (clientParam.toLowerCase() === 'iecentral') {
                    redirectToClient('clients/IECentral/index.html');
                } else {
                    redirectToClient('clients/IECentral/index.html');
                }
            } else if (referrer.includes('bmore.softr.app')) {
                redirectToClient('clients/BHB/index.html');
            } else {
                redirectToClient('clients/IECentral/index.html');
            }
        });
    </script>
</head>
<body>
    <p>Redirecting to the appropriate support portal...</p>
</body>
</html> 